<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SAMA - Diagn√≥stico ANR1</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --fundo: #e8f5e9;
      --verde: #65a533;
      --verde-escuro: #4e7d2d;
      --branco: #ffffff;
      --texto: #2d3748;
      --cinza: #6c757d;
      --sombra: rgba(101, 165, 51, 0.1);
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      transition: all 0.3s ease;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--fundo);
      color: var(--texto);
      line-height: 1.8;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }
    header {
      text-align: center;
      margin-bottom: 40px;
    }
    header img {
      max-width: 240px;
      height: auto;
      border-radius: 16px;
      margin-bottom: 20px;
      border: 3px solid var(--verde);
    }
    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.6rem;
      color: var(--verde-escuro);
      margin-bottom: 10px;
    }
    h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.1rem;
      color: var(--verde-escuro);
      margin: 25px 0 15px;
    }
    h3 {
      color: var(--verde);
      margin: 20px 0 10px;
      font-weight: 600;
    }
    p {
      font-size: 17px;
      color: var(--texto);
      margin-bottom: 16px;
    }
    .btn {
      display: inline-block;
      background: linear-gradient(90deg, var(--verde), var(--verde-escuro));
      color: white;
      padding: 16px 32px;
      margin: 20px 0;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 6px 20px var(--sombra);
      border: none;
      font-size: 18px;
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(101, 165, 51, 0.4);
    }
    .section {
      background: var(--branco);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 10px 30px var(--sombra);
      margin-bottom: 30px;
      border: 1px solid #e0e0e0;
    }
    .pergunta {
      margin-bottom: 28px;
      padding-bottom: 18px;
      border-bottom: 1px solid #eee;
    }
    .pergunta h3 {
      font-size: 1.3rem;
    }
    .opcoes label {
      display: block;
      margin: 10px 0;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 8px;
    }
    .opcoes label:hover {
      background: rgba(101, 165, 51, 0.1);
    }
    .opcoes input[type="radio"] {
      accent-color: var(--verde);
      margin-right: 10px;
    }
    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 14px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    button {
      background: linear-gradient(90deg, var(--verde), var(--verde-escuro));
      color: white;
      padding: 16px 30px;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 20px;
      box-shadow: 0 6px 20px var(--sombra);
    }
    button:hover {
      transform: translateY(-3px);
    }
    .resultado-box {
      text-align: center;
      padding: 40px;
      background: var(--branco);
      border-radius: 20px;
      box-shadow: 0 10px 30px var(--sombra);
      margin-top: 30px;
      border: 2px solid var(--verde);
      display: none;
    }
    .porcentagem {
      font-family: 'Orbitron', sans-serif;
      font-size: 5rem;
      color: var(--verde);
      margin: 20px 0;
    }
    .nivel {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 20px;
    }
    .risco-alto {
      color: #e53e3e;
    }
    .risco-medio {
      color: #dd6b20;
    }
    .risco-baixo {
      color: var(--verde);
    }
    footer {
      text-align: center;
      margin-top: 50px;
      padding: 20px;
      color: var(--cinza);
      font-size: 14px;
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <img src="https://i.imgur.com/rH218zu.png" alt="SAMA PARA + EQUIL√çBRIO" class="logo">
      <h1>SAMA PARA + EQUIL√çBRIO</h1>
      <p>Diagn√≥stico de Conformidade com a ANR1</p>
    </header>

    <!-- Etapa 1: Introdu√ß√£o -->
    <div id="introducao" class="section">
      <h2>üìä Diagn√≥stico ANR1</h2>
      <p>Responda 13 perguntas para receber um relat√≥rio completo com:</p>
      <ul>
        <li>‚úÖ Porcentagem de conformidade com a norma</li>
        <li>üîç An√°lise detalhada dos pontos cr√≠ticos</li>
        <li>üí° Recomenda√ß√µes personalizadas</li>
        <li>üì© Relat√≥rio enviado automaticamente para o e-mail da SAMA</li>
      </ul>
      <button onclick="mostrarFormulario()" class="btn">Iniciar Diagn√≥stico</button>
    </div>

    <!-- Etapa 2: Dados da Empresa -->
    <div id="etapa-empresa" class="section" style="display:none;">
      <h3>üè¢ Dados da Empresa</h3>
      <div class="form-group">
        <label>Nome da Empresa</label>
        <input type="text" id="empresa" placeholder="Ex: TechSolutions Ltda">
      </div>
      <div class="form-group">
        <label>CNPJ</label>
        <input type="text" id="cnpj" placeholder="Ex: 12.345.678/0001-90">
      </div>
      <div class="form-group">
        <label>N√∫mero de Colaboradores</label>
        <input type="number" id="colaboradores" placeholder="Ex: 50" min="1">
      </div>
      <button onclick="proximo()">Continuar ‚Üí</button>
    </div>

    <!-- Etapa 3: Question√°rio -->
    <form id="form-quiz" style="display:none;">
      <input type="hidden" name="empresa" id="empresa-input">
      <input type="hidden" name="cnpj" id="cnpj-input">
      <input type="hidden" name="colaboradores" id="colaboradores-input">

      <div class="pergunta">
        <h3>1. Hist√≥rico de Demandas</h3>
        <div class="opcoes">
          <label><input type="radio" name="demanda" value="A"> A) Sim, mais de 5 casos</label>
          <label><input type="radio" name="demanda" value="B"> B) Sim, entre 3 e 5 casos</label>
          <label><input type="radio" name="demanda" value="C"> C) Sim, 1 ou 2 casos</label>
          <label><input type="radio" name="demanda" value="D"> D) Nenhum caso, mas advert√™ncias</label>
          <label><input type="radio" name="demanda" value="E"> E) Nunca tivemos casos</label>
        </div>
      </div>

      <div class="pergunta">
        <h3>2. Percep√ß√£o de Ocorr√™ncia Interna</h3>
        <div class="opcoes">
          <label><input type="radio" name="ocorrencia" value="A"> A) Ocorre frequentemente</label>
          <label><input type="radio" name="ocorrencia" value="B"> B) Ocorre ocasionalmente</label>
          <label><input type="radio" name="ocorrencia" value="C"> C) Raramente ocorre</label>
          <label><input type="radio" name="ocorrencia" value="D"> D) Pouco prov√°vel</label>
          <label><input type="radio" name="ocorrencia" value="E"> E) N√£o ocorre</label>
        </div>
      </div>

      <!-- Adicione as outras perguntas aqui -->

      <button type="submit">Gerar Relat√≥rio e Enviar</button>
    </form>

    <!-- Etapa 4: Resultado -->
    <div class="resultado-box" id="resultado">
      <h2>‚ú® Relat√≥rio Enviado!</h2>
      <p><strong>Empresa:</strong> <span id="nome-empresa"></span></p>
      <div id="porcentagem" class="porcentagem">76%</div>
      <div id="nivel" class="nivel">N√≠vel de Conformidade</div>
      <p>Seu diagn√≥stico foi recebido com sucesso. Em breve, nossa equipe entrar√° em contato.</p>
    </div>
  </div>

  <footer>
    &copy; 2025 SAMA PARA + EQUIL√çBRIO. Todos os direitos reservados.
  </footer>

  <!-- EmailJS Script -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    // üîë Substitua com suas chaves do EmailJS
    (function() {
      emailjs.init("YOUR_USER_ID"); // Ex: user_abc123def456
    })();

    function mostrarFormulario() {
      document.getElementById('introducao').style.display = 'none';
      document.getElementById('etapa-empresa').style.display = 'block';
    }

    function proximo() {
      const empresa = document.getElementById('empresa').value.trim();
      const cnpj = document.getElementById('cnpj').value.trim();
      const colaboradores = document.getElementById('colaboradores').value;

      if (!empresa) {
        alert("Informe o nome da empresa.");
        return;
      }
      if (!cnpj) {
        alert("Informe o CNPJ.");
        return;
      }
      if (!colaboradores) {
        alert("Informe o n√∫mero de colaboradores.");
        return;
      }

      document.getElementById('empresa-input').value = empresa;
      document.getElementById('cnpj-input').value = cnpj;
      document.getElementById('colaboradores-input').value = colaboradores;

      document.getElementById('etapa-empresa').style.display = 'none';
      document.getElementById('form-quiz').style.display = 'block';
    }

    document.getElementById('form-quiz').addEventListener('submit', function(e) {
      e.preventDefault();
      const formData = new FormData(this);
      const empresa = formData.get('empresa');
      const cnpj = formData.get('cnpj');
      const colaboradores = formData.get('colaboradores');

      // C√°lculo de conformidade
      const valores = { A: 1, B: 2, C: 3, D: 4, E: 5 };
      const totalPerguntas = 13;
      let pontuacaoTotal = 0;

      for (let [key, value] of formData.entries()) {
        if (!['empresa', 'cnpj', 'colaboradores'].includes(key)) {
          pontuacaoTotal += valores[value] || 0;
        }
      }

      const maximoPossivel = totalPerguntas * 5;
      const porcentagem = Math.round((pontuacaoTotal / maximoPossivel) * 100);

      // Classifica√ß√£o
      let nivel, cor;
      if (porcentagem >= 80) {
        nivel = "Alta Conformidade";
        cor = "var(--verde)";
      } else if (porcentagem >= 50) {
        nivel = "Conformidade M√©dia";
        cor = "#dd6b20";
      } else {
        nivel = "Baixa Conformidade";
        cor = "#e53e3e";
      }

      // Gerar relat√≥rio em texto
      const relatorio = `
üåü **RELAT√ìRIO DE CONFORMIDADE ANR1** üåü

üè¢ **Empresa:** ${empresa}
üìã **CNPJ:** ${cnpj}
üë• **Colaboradores:** ${colaboradores}

üìä **Porcentagem de Conformidade:** ${porcentagem}%
üéØ **N√≠vel:** ${nivel}

üîç **An√°lise Detalhada:**
${porcentagem >= 80 
  ? "‚úÖ Sua empresa est√° em excelente conformidade com a ANR1. Pr√°ticas robustas, cultura saud√°vel e preven√ß√£o ativa."
  : porcentagem >= 50 
    ? "‚ö†Ô∏è Sua empresa possui pol√≠ticas b√°sicas, mas h√° pontos cr√≠ticos que precisam de aten√ß√£o e melhoria."
    : "üî¥ Sua empresa est√° com alto risco legal e emocional. Falta de pol√≠ticas formais e preven√ß√£o ao ass√©dio moral."}

üí° **Recomenda√ß√µes:**
${porcentagem >= 80 
  ? "‚Ä¢ Continue monitorando com auditorias semestrais.\n‚Ä¢ Fortale√ßa programas de sa√∫de mental.\n‚Ä¢ Compartilhe boas pr√°ticas com outras empresas."
  : porcentagem >= 50 
    ? "‚Ä¢ Implemente treinamentos regulares sobre sa√∫de mental.\n‚Ä¢ Crie um canal de den√∫ncia an√¥nimo.\n‚Ä¢ Fortale√ßa a cultura de preven√ß√£o."
    : "‚Ä¢ Urgente: implanta√ß√£o imediata da ANR1.\n‚Ä¢ Contrate equipe especializada.\n‚Ä¢ Realize diagn√≥stico profundo do clima organizacional."}

üì© Este relat√≥rio foi gerado automaticamente pelo sistema SAMA.
      `;

      // Enviar dados para Formspree (opcional)
      fetch('https://formspree.io/f/xqadebjz', {
        method: 'POST',
        body: formData,
        headers: { 'Accept': 'application/json' }
      }).catch(console.error);

      // Enviar relat√≥rio por e-mail via EmailJS
      const templateParams = {
        to_email: 'paramaisequilibriosama@gmail.com',
        to_name: 'SAMA',
        empresa: empresa,
        cnpj: cnpj,
        colaboradores: colaboradores,
        porcentagem: porcentagem,
        nivel: nivel,
        relatorio: relatorio
      };

      emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
        .then(() => {
          // Mostrar resultado
          document.getElementById('nome-empresa').textContent = empresa;
          document.getElementById('porcentagem').textContent = porcentagem + '%';
          document.getElementById('nivel').textContent = nivel;
          document.getElementById('nivel').className = 'nivel ' + 
            (porcentagem >= 80 ? 'risco-baixo' : porcentagem >= 50 ? 'risco-medio' : 'risco-alto');

          document.getElementById('form-quiz').style.display = 'none';
          document.getElementById('resultado').style.display = 'block';
        })
        .catch(error => {
          console.error('Erro ao enviar e-mail:', error);
          alert('Erro ao enviar relat√≥rio. Mas seus dados foram registrados.');
          // Mesmo com erro, mostra o resultado
          document.getElementById('nome-empresa').textContent = empresa;
          document.getElementById('porcentagem').textContent = porcentagem + '%';
          document.getElementById('nivel').textContent = nivel;
          document.getElementById('form-quiz').style.display = 'none';
          document.getElementById('resultado').style.display = 'block';
        });
    });
  </script>
</body>
</html>
